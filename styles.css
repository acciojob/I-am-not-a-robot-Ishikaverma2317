document.addEventListener("DOMContentLoaded", () => {
  const images = [
    "https://picsum.photos/id/237/200/200", // dog
    "https://picsum.photos/200/200?random=1",
    "https://picsum.photos/200/200?random=2",
    "https://picsum.photos/200/200?random=3",
    "https://picsum.photos/200/200?random=4",
    "https://picsum.photos/200/200?random=5"
  ];

  const container = document.getElementById("image-container");
  const message = document.getElementById("message");

  // pick 4 random + 1 duplicate
  let selected = [];
  while (selected.length < 4) {
    let img = images[Math.floor(Math.random() * images.length)];
    if (!selected.includes(img)) {
      selected.push(img);
    }
  }

  // add duplicate
  const duplicate = selected[Math.floor(Math.random() * selected.length)];
  selected.push(duplicate);

  // shuffle
  selected.sort(() => Math.random() - 0.5);

  // render images
  selected.forEach(src => {
    const img = document.createElement("img");
    img.src = src;
    img.style.width = "100px";
    img.style.margin = "5px";
    img.addEventListener("click", () => {
      img.classList.toggle("selected");
    });
    container.appendChild(img);
  });

  // verify button
  document.getElementById("verify-btn").addEventListener("click", () => {
    const selectedImgs = document.querySelectorAll(".selected");
    if (selectedImgs.length === 2 && selectedImgs[0].src === selectedImgs[1].src) {
      message.textContent = "You are a human!";
      message.style.color = "green";
    } else {
      message.textContent = "Verification failed. Try again!";
      message.style.color = "red";
    }
  });
});
